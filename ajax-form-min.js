YAHOO.namespace("nixmc");(function(){YAHOO.nixmc.AjaxForm=function(I,H){H=H||{};if(arguments.length===1&&!YAHOO.lang.isString(I)&&!I.nodeName){H=I;I=H.element||null}YAHOO.nixmc.AjaxForm.superclass.constructor.call(this,I,H)};YAHOO.extend(YAHOO.nixmc.AjaxForm,YAHOO.util.Element);var F=YAHOO.nixmc.AjaxForm.prototype,E=YAHOO.util.Connect,D=YAHOO.util.Event;var G=function(H){var I=(console&&console.log)||alert;I(H)};var C=function(){var L=["input","textarea","button"],I=[],K=[];for(var H in L){K=this.getElementsByTagName(L[H]);for(var J=0;J<K.length;J++){I.push(new YAHOO.util.Element(K[J]))}}return I};var B=function(){var I,J;for(var H in this.inputs){I=this.inputs[H];I.get("element").disabled=!I.get("element").disabled;if(I.get("element").disabled){I.addClass("disabled")}else{I.removeClass("disabled")}this.fireEvent(I.get("element").disabled?"inputDisabled":"inputEnabled",I)}};var A=function(){if(this.fireEvent("beforeSendRequest")===false){return}var H=this.form;var I={start:function(J){this.fireEvent("start",J)},complete:function(J){this.fireEvent("complete",J)},success:function(J){this.get("element").innerHTML=J.responseText;this.setup();this.fireEvent("success",J)},failure:function(J){alert("Oops, there was a problem, please try again");B.apply(this);this.fireEvent("failure",J)},abort:function(J){this.fireEvent("abort",J)},scope:this};E.startEvent.subscribe(I.start);E.completeEvent.subscribe(I.complete);E.abortEvent.subscribe(I.abort);E.setForm(H.get("element"));E.asyncRequest(H.get("method"),H.get("action"),I,"AJAX_REQUEST=1");B.apply(this)};F.setup=function(){this.form=this.getElementsByTagName("form")[0]||null;if(this.form){this.form=new YAHOO.util.Element(this.form);this.inputs=C.apply(this)}if(this.form!==null){this.form.on("submit",function(H){D.stopEvent(H);A.apply(this)},this,true)}};F.getForm=function(){return this.form};F.getFormElement=function(){return this.form.get("element")};F.getInputs=function(){return this.inputs};F.getElement=function(){return this.get("element")}})();YAHOO.register("nixmc.AjaxForm",YAHOO.nixmc.AjaxForm,{version:"0.1",build:"1"});